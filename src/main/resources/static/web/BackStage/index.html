<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 核心文件 -->
    <script src="../bootstrap3/js/holder.js"></script>
    <link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
    <script src="../bootstrap3/js/bootstrap.js"></script>

    <!-- 自訂CSS -->
    <link rel="stylesheet" type="text/css" href="../../css/com/nav/shopLogo.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/index.css"/>

    <meta charset="UTF-8">
    <title>後台</title>

    <style>
        .row {
            margin-right: 0px;
            margin-left: 0px;
        }
        .content-panel {
            display: none;
        }
        .content-panel.activePage {
            display: block;
        }

        #nav-container{
            margin-top: 5em;
            border: 3px solid;
        }

        #nav-ul{
            border-bottom: 3px solid;
            background-color: #F2F2F2;
        }

        .nav-li-a{
            background: #ccc;
        }

        .pagebox-container{
            display: flex;
            align-items: center;
            justify-content: center;
            height: 400px;
        }

        .pagebox-container p{
            color: black !important;
        }

        .memberList-div{
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            align-content: center;
            justify-content: center;
            align-items: center;

            border: 1px solid;
        }

        .memlist{
            border-right: 1px solid;
        }



        .member-list-th{
            text-align: center;
        }

        th,tr,td {
            border-right: 1px solid #ccc;
        }

        .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
            /* padding: 8px; */
            line-height: 1.42857143;
            /* vertical-align: top; */
            border-top: 1px solid #ddd;
        }
        .table {

             margin-bottom: 0px;
        }
    </style>
</head>
<body>

<header class="header">
    <!-- 商城文字 logo -->
    <div class="row" id="logo-position"></div>
</header>

<!-- 導航 -->
<div class="row top-nav" id="nav-container">
    <!-- Tab 切換 -->
    <ul class="nav nav-pills" id="nav-ul">
        <li class="activePage"><a class="nav-li-a" href="#home">回到首頁 <span class="fa fa-home"></span></a></li>
        <li><a class="nav-li-a" href="#member">會員管理<span class="fa fa-users"></span></a></li>
        <li><a class="nav-li-a" href="#orders">訂單管理<span class="fa fa-list-alt"></span></a></li>
        <li><a class="nav-li-a" href="#products">商品管理<span class="fa fa-tags"></span></a></li>
<!--        <li><a class="nav-li-a" href="#cart">購物車管理<span class="fa fa-shopping-cart"></span></a></li>-->
<!--        <li><a class="nav-li-a" href="#regions">行政區劃管理<span class="fa fa-map-marker"></span></a></li>-->
        <!-- 搜索表单 -->
        <form action="search.html" class="form-inline pull-right" role="form" id="search-form">
            <div class="form-group">
                <input type="text" class="form-control" id="search" name="search" placeholder="請輸入商品名稱">
            </div>
            <button type="submit" class="btn btn-default btn-sm"><span class="fa fa-search"></span></button>
        </form>
    </ul>
        <!-- 内容 -->

        <div class="content-panel activePage" id="Backhome">回到首頁</div>
        <div class="content-panel" id="member">會員管理...</div>
        <div class="content-panel" id="orders">訂單管理...</div>
        <div class="content-panel" id="products">商品管理...</div>
<!--        <div class="content-panel" id="cart">購物車管理...</div>-->
<!--        <div class="content-panel" id="regions">行政區劃管理...</div>-->
    </div>
</div>

<script src="../../js/com/nav/showLogoDiv.js"></script>
<script src="../../js/com/nav/showHotList.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        showLogoDiv();
        showHotList();

        getUserData();
        // 分頁切換
        $('.nav-li-a').on('click', function(e) {
            e.preventDefault();
            let targetPanel = $(this).attr('href').substring(1);
            $('.content-panel').removeClass('activePage');
            $('#' + targetPanel).addClass('activePage');
            $('.nav-pills li').removeClass('activePage');
            $(this).parent('li').addClass('activePage');
        });
    });
    function getUserData() {
        $.ajax({
            url: '/BackStage/user',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                let userList = data;
                let memberContainer = $('#member');
                memberContainer.empty();

                let table = $('<table></table>').addClass('table');

                let thead = $('<thead></thead>');
                thead.append('<tr>' +
                    '<th class="member-list-th">ID</th>' +
                    '<th class="member-list-th">名稱</th>' +
                    '<th class="member-list-th">密碼</th>' +
                    '<th class="member-list-th">鹽值</th>' +
                    '<th class="member-list-th">電話</th>' +
                    '<th class="member-list-th">郵件</th>' +
                    '<th class="member-list-th">性別</th>' +
                    '<th class="member-list-th">頭像</th>' +
                    '<th class="member-list-th">狀態</th>' +
                    '<th class="member-list-th">操作</th>' +
                    '</tr>');
                table.append(thead);

                let tbody = $('<tbody></tbody>');
                $.each(userList, function (index, user) {
                    let tr = $('<tr></tr>');
                    tr.append('<td>' + user.uid + '</td>');
                    tr.append('<td>' + user.username + '</td>');
                    tr.append('<td>' + user.password + '</td>');
                    tr.append('<td>' + user.salt + '</td>');
                    tr.append('<td>' + user.phone + '</td>');
                    tr.append('<td>' + user.email + '</td>');
                    tr.append('<td>' + user.gender + '</td>');
                    tr.append('<td><img src="data:image/png;base64,' + user.avatar + '" alt="User Avatar" style="width:50px;height:50px;"></td>');
                    tr.append('<td>' + (user.isDelete ? '是' : '否') + '</td>');
                    tr.append('<td>' +
                        '<button class="btn btn-success btn-sm">修改</button>' +
                        '<button class="btn btn-warning btn-sm">刪除</button>' +
                        '</td>');
                    tbody.append(tr);
                });
                table.append(tbody);

                memberContainer.append(table);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('AJAX請求失敗：' + textStatus + ', ' + errorThrown);
            }
        });
    }


</script>
</body>
</html>
