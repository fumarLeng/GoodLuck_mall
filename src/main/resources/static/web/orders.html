<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>訂單</title>
    <style>
        .order-container {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 10px;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<div id="orders"></div>

<script>
    function displayOrders(orders) {
        var ordersContainer = $('#orders');

        orders.forEach(function(order) {
            var imageUrl = '..' + order.image; // 拼接路徑
            var orderDiv = `
                    <div class="order-container">
                        <h3>訂單編號: ${order.oid}</h3>
                        <p>總價: ${order.totalPrice}</p>
                        <p>狀態: ${order.status}</p>
                        <p>下訂單時間: ${order.orderTime}</p>
                        <p>付款時間: ${order.payTime || '未付款'}</p>
                        <div>
                        <img src="${imageUrl}" alt="${order.title}" style="width: 100px;"> <!-- 使用拼接 -->
                            <p>${order.title}</p>
                            <p>價格: ${order.price}</p>
                            <p>數量: ${order.num}</p>
                        </div>
                    </div>
                `;
            ordersContainer.append(orderDiv);
        });
    }

    function fetchOrders() {
        $.ajax({
            url: '/orders/queryOrderVo',
            type: 'GET',
            success: function(json) {
                if (json.state == 200) {
                    displayOrders(json.data);
                } else {
                    console.error('Failed to fetch orders:', json.message);
                }
            },
            error: function(xhr, status, error) {
                console.error('An error occurred:', error);
            }
        });
    }

    $(document).ready(function() {
        fetchOrders();
    });
</script>
</body>
</html>